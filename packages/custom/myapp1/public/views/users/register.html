<form name="signUpForm" ng-controller="RegisterCtrl as reg" ng-submit="reg.register()" class="login-box">

  <md-card-title>
    <md-card-title-text>
      <span class="md-headline">Join</span>
      <div ng-repeat="error in reg.registerError">
        <p class="alert alert-danger animated fadeIn">{{error.msg}}</p>
      </div>
        <!--<p class="alert alert-danger animated fadeIn">
       <span ng-show="signUpForm.first_name.$touched && signUpForm.first_name.$invalid">First Name is required.</span>
        <div ng-messages="signUpForm.register-email.$error">
            <div ng-message="required">required</div>
            <div ng-message="email">invalid email</div>
        </div>
        </p>-->
    </md-card-title-text>
  </md-card-title>

  <md-card-content>

        <md-input-container class="md-block flex-gt-sm">
          <label>First Name</label>
          <input type="text" name="firstname" ng-model="reg.user.first_name" required>
            <div ng-messages="signUpForm.firstname.$error" ng-show="signUpForm.firstname.$touched && !signUpForm.firstname.$dirty">
                <div ng-messages-include="generic-messages">This field is required</div>
            </div>
        </md-input-container>

        <md-input-container class="md-block flex-gt-sm">
          <label>Last Name</label>
          <input type="text" name="lastname" ng-model="reg.user.last_name" required>
            <div ng-messages="signUpForm.lastname.$error" ng-show="signUpForm.lastname.$touched && !signUpForm.lastname.$dirty">
                <div ng-messages-include="generic-messages">This field is required</div>
            </div>
        </md-input-container>


      <md-input-container class="md-block">
          <label>Date of Birth</label>
          <md-datepicker ng-model="reg.user.birth_date" md-max-date="maxDate" md-min-date="minDate" ng-required="true"></md-datepicker>
      </md-input-container>
      <md-input-container class="md-block flex-gt-sm">
          <label>State/Province</label>
          <input type="text" name="state" ng-model="reg.user.state" required>
          <div ng-messages="signUpForm.state.$error" ng-show="signUpForm.state.$touched && !signUpForm.state.$dirty">
              <div ng-messages-include="generic-messages">This field is required</div>
          </div>
      </md-input-container>

      <md-input-container class="md-block flex-gt-sm">
          <label>Country</label>
          <input type="text" name="country" ng-model="reg.user.country" required>
          <div ng-messages="signUpForm.country.$error" ng-show="signUpForm.country.$touched && !signUpForm.country.$dirty">
              <div ng-messages-include="generic-messages">This field is required</div>
          </div>
      </md-input-container>

    <md-input-container class="md-block">
      <label>Username</label>
      <input type="text" name="username" ng-model="reg.user.username" ng-minlength="3" ng-maxlength="20" required>
        <div ng-messages="signUpForm.username.$error" ng-show="signUpForm.username.$touched && !signUpForm.username.$dirty">
            <!--<p ng-message="pattern">Username can only be alphanumeric with an optional underscore.</p>-->
            <p ng-message="maxlength">Username cannot be longer than 20 characters.</p>
            <p ng-message="minlength">Username cannot be less than 3 characters.</p>
            <div ng-messages-include="generic-messages">This field is required</div>
        </div>
    </md-input-container>

    <md-input-container class="md-block">
      <label>Email Address</label>
      <input type="email" name="registeremail" ng-model="reg.user.email" required>
        <div ng-messages="signUpForm.registeremail.$error" ng-show="signUpForm.registeremail.$touched && !signUpForm.registeremail.$dirty">
            <p ng-message="required">This field is required.</p>
            <p ng-message="email">Please enter a valid email address.</p>
        </div>
    </md-input-container>



    <md-input-container class="md-block">
      <label>Password</label>
      <input type="password" name="registerpassword" ng-model="reg.user.password" ng-minlength="8" ng-maxlength="20" required>
        <p ng-show="signUpForm.registerpassword.$error.minlength" class="help-block">Password must be between 8-20 characters long.</p>
        <p ng-show="signUpForm.registerpassword.$error.maxlength" class="help-block">Password cannot be more than 20 characters.</p>
    </md-input-container>

    <md-input-container class="md-block">
      <label>Confirm Password</label>
      <input type="password" name="registerconfirmpassword" ng-model="reg.user.confirmPassword" required>
        <span ng-show="signUpForm.registerpassword.$dirty &&
        signUpForm.registerconfirmpassword.$dirty &&
        reg.user.confirmPassword !== reg.user.password">Password and Confirm Password does not match.</span>
    </md-input-container>
      <md-input-container class="md-block">

                <div vc-recaptcha
                     on-create="reg.setWidgetId(widgetId)"
                     on-success="reg.setResponse(response)"
                     on-expire="reg.cbExpiration()"
                key="reg.recaptchaConfig.key"></div>

      </md-input-container>
  </md-card-content>

  <md-card-actions layout="row" layout-align="end center">

    <md-button ui-sref="forgot-password">Forgot Password</md-button>
    <md-button ui-sref="auth.login">Login</md-button>
    <span flex></span>
    <md-button class="md-primary" type="submit" ng-disabled="signUpForm.$invalid || reg.user.confirmPassword !== reg.user.password">Join</md-button>

  </md-card-actions>
</form>
